%%==================================================================%%
%% Author : Pérez Ruiz, Alejandro                                   %%
%% Author : Sánchez Barreiro, Pablo                                 %%
%% Version: 1.1, 16/01/2011                                         %%                                                                                    %%                                                                  %%
%% Memoria del Proyecto Fin de Carrera                              %%
%% Domain Engineering/Architecture                                  %%
%%==================================================================%%

Un hogar inteligente posee una serie de dispositivos que se descomponen en \emph{sensores} y \emph{actuadores}. Los \emph{sensores} son los encargados de obtener los datos del elemento al que pertenecen, como por ejemplo, los grados que hace en una habitación, la apertura que tiene una ventana... Los \emph{actuadores} se encargan de ejecutar las ordenes, por ejemplo que una persiana se abra o se cierre, la calefacción se encienda a unos determinados grados...

Tanto los sensores como los actuadores se encuentran conectados a un dispositivo central que los coordina, el cual se conoce como \emph{puerta de enlace} (en inglés, \emph{Gateway}). Dicho Gateway se encarga de leer los datos de los sensores, procesarlos y enviar las ordenes adecuadas a los actuadores. De igual modo, el Gateway recibe ordenes de los usuarios que son ejecutadas por los actuadores para modificar los elementos de la casa.

%%=====================================================================%%
%% HECHO(Pablo): Aquí hace falta una figura describiendo la            %%
%%              arquitectura                                           %%
%% http://www.google.es/imgres?imgurl=http://www.fancybread.com/blog/images//mediator.jpg&imgrefurl=http://www.fancybread.com/blog/post.cfm/mediator-pattern-applied-to-javascript&h=273&w=316&sz=25&tbnid=x1f5CI5WvMYNzM:&tbnh=101&tbnw=117&prev=/search%3Fq%3DMediator%2BPattern%26tbm%3Disch%26tbo%3Du&zoom=1&q=Mediator+Pattern&hl=es&usg=__ZG2xo8qDKX8sPv-uWS_mDcE-zQo=&sa=X&ei=MnL7TZLvNcWYhQfkrYizAw&ved=0CEcQ9QEwBQ
%%=====================================================================%%
Por tanto, tal como se ve en la Figura~\ref{domain:fig:mediator}, el diseño de nuestra arquitectura es una aplicación concreta del patrón de diseño \emph{mediador}~\cite{gamma:1994}, donde el \emph{Gateway} ejercer el papel de mediador, y los diferentes sensores y actuadores son los distintos elementos a coordinar. El objetivo de este patrón es extraer y encapsular en una única clase la lógica de coordinación de un conjunto de objetos que necesitan interaccionar entre ellos siguiendo reglas de coordinación de cierta complejidad. Al encapsular esta lógica en un único objeto, denominado \emph{mediador} , el diseño de los diferentes objetos que deben interactuar, en nuestro caso sensores y actuadores,  se simplifica, ya que estos elementos ahora sólo tienen que notificar eventos al mediador y recibir notificaciones del mismo. Del mismo modo, cualquier cambio en la lógica de coordinación de estos objetos afecta solo a la clase \emph{Mediador}, el \emph{Gateway} en nuestro caso, en lugar de a los diferentes objetos que toman parte en la interacción.
\begin{figure}[!h]
 \centering
 \includegraphics[width=.55\linewidth]{domainEngineering/images/Mediator.eps} \\
 \caption{Diseño de la arquitectura a través del patrón de diseño \emph{mediador}}
 \label{domain:fig:mediator}
\end{figure}

Además de los sensores y actuadores, para que el usuario pueda controlar y visualizar el estado de los diversos dispositivos es necesario la creación de una interfaz gráfica que permita al usuario interactuar con el \emph{Gateway}.

Esta interfaz gráfica tendrá que actualizar el estado de sus elementos cuando se producen cambios en los dispositivos. Para simplificar esta dependencia entre la interfaz gráfica y el \emph{Gateway}, haremos uso del patrón \emph{Observador}~\cite{gamma:1994} (\emph{Observer pattern}, en inglés). Para instanciar este patrón, el \emph{Gateway} contendrá una lista por cada dispositivo que pueda ser observado. Los objetos interesados en ser notificados cada vez que dicho dispositivo cambie su estado se registrarán o añadirán en dicha lista. De esta forma, cada vez que un dispositivo cambia de estado, el \emph{Gateway} notifica dicho cambio a todos los objetos registrados en la correspondiente lista de \emph{observadores}.

Finalmente, y dado que este proyecto no trabaja con actuadores y sensores reales, es necesario simular mediante software dichos dispositivos. Por ejemplo, deberemos simular variables tales como la temperatura percibida por los sensores, o el transcurso del tiempo del sistema. Para ello crearemos una interfaz gráfica que juegue el papel de simulador, y permita al usuario interactuar con los dispositivos a simular así como alterar diversas variables externas al sistema, como la temperatura.

Una vez definido el diseño arquitectónico básico, se desarrollan las iteraciones necesarias para completar la fase de ingeniería del dominio. La siguiente sección describe los principios de diseño seguidos para la construcción de dichas características. 