%==================================================================%
% Author : Perez Ruiz, Alejandro                                   %
% Version: 1.0, 16/03/2011                                         %                                                                                    %                                                                  %
% Memoria del Proyecto Fin de Carrera                              %
% Capítulo Planificacion, Archivo raíz                             %
%==================================================================%

\chapterheader{Definición y Planificación del Proyecto}{Definición y Planificación del Proyecto}

\label{chap:planificacion}

% Introducción al capítulo

\chaptertoc

\section{Caso de Estudio: Hogares Inteligentes Automatizados}

% Resumir lo que aparece en diversos documentos
El objetivo de estos hogares es el aumento de la comodidad y seguridad de sus habitantes, así como hacer un uso más eficiente de la energía consumida. Se ha elegido este dominio por ser un dominio donde el uso de un enfoque basado en Líneas de Productos Software se hace casi imperativo, debido a la gran variabilidad existente en estos productos. Esta variabilidad se debe tanto a motivos de hardware, dado que los dispositivos a ser controlados e interconectados pueden variar enormemente, como funcionales, dado que existen multitud de funcionalidades que se pueden ofrecer de manera opcional o alternativa al usuario, no siendo necesario que un determinado hogar las posea todas ellas.

Los ejemplos más comunes de tareas automatizadas dentro de un hogar inteligente son el control de luces, ventanas, puertas, persianas, calefacción, etc. Del mismo modo, se puede incrementar la seguridad de sus habitantes mediante sistemas automatizados de vigilancia y alertas de potenciales situaciones de riesgo, tales como detección de humos o ventanas abiertas cuando se abandona el hogar.

Para el funcionamiento de los hogares los dispositivos de control inteligente leen datos de los sensores, procesan estos datos, y activan los actuadores, si fuese necesario. Para algunas tareas de control y automatización los dispositivos de control inteligentes actúan autónomamente.

La puerta de enlace (\emph{Gateway}, en inglés) es el servidor central del hogar inteligente. Éste realiza el procesado y el almacenamiento de los datos requeridos para las aplicaciones. Los usuarios(tanto residentes como técnicos), pueden acceder a los servicios ofrecidos a través de la puerta de enlace o a través de otras interfaces de usuario disponibles.

El presente proyecto se centrará en el desarrollo de un hogar inteligente como una línea de productos software, con un número variable de plantas y habitaciones. El número de habitaciones por planta es también variable. La arquitectura de la línea de productos implementa varios servicios, clasificados en funciones básicas y complejas, que son descritas a continuación.


Las \emph{funciones básicas} son:
\begin{enumerate}
\item \emph{Control automático de luces:} Los habitantes del hogar deben ser capaces de encender, apagar y ajustar la intensidad de las diferentes luces de la casa. El número de luces por habitación es variable. El ajuste debe realizarse especificando un valor de intensidad.
\item \emph{Control automático de puertas:} Las puertas pueden abrirse automáticamente. Además, el control de acceso de algunas puertas puede ser necesario.
\item \emph{Control automático de ventanas:} Los residentes tienen que ser capaces de controlar las ventanas automáticamente.Además, si la ventana tiene persianas, éstas deben ser desenrolladas o enrolladas automáticamente.
\item \emph{Control automático de temperatura:} El usuario será capaz de ajustar la temperatura de la casa.La temperatura podrá ser manejada en grados Celsius o Fahrenheit.
\end{enumerate}

Las \emph{funciones complejas} son:

\begin{enumerate}
\item \emph{Control inteligente de energía:} Esta funcionalidad trata de coordinar el uso de ventanas y aparatos para regular la temperatura interna de la casa, de manera que se haga un uso más eficiente de la energía consumida por parte de los aparatos de frío/calor. Por ejemplo, si se recibe la orden de calentar la casa, a la vez que se activan los radiadores se cerrarán las ventanas de la casa para evitar las pérdidas de calor.
\item \emph{Control inteligente de luces:} Las luces deberán automáticamente apagarse/encenderse dependiendo de diversos factores. Si no hay luz natural fuera de la casa, las luces deberán automáticamente encenderse. Cada vez que un habitante entre a una habitación donde no haya iluminación suficiente, las luces automáticamente se encenderán, a menos que la habitación esté en modo "sleep". Este modo previene el alumbrado automático de una habitación,en el caso de que alguien estuviese durmiendo.
\item \emph{Presencia simulada:} Para evitar posibles robos, cuando los habitantes dejen la casa por un periodo largo de tiempo, la presencia de personas podrá ser simulada. Hay dos opciones(no exclusivas entre ellas):
    \begin{enumerate}
    \item \emph{Simulación de las luces:} Las luces podrán ser apagadas/encendidas para simular presencia. Se usará un esquema semi-aleatorio, por ejemplo el esquema variará cada día acorde a unos parametros aleatorios, pero las luces no serán apagadas/encendidas sin sentido, serán encendidas más por la tarde/noche que durante el día.
    \item \emph{Simulación de persianas:} Las persianas serán subidas y bajadas, acorde con un esquema semi-aleatorio.Por ejemplo,las persianas de los dormitorios principales serán bajadas por la noche y subidas por la mañana,y las otras habitaciones, algunas noches se bajarán y otras noches no.
    \end{enumerate}
\end{enumerate}

Cada una de estas funciones son opcionales. Las personas interesadas en adquirir el sistema podrán seleccionar el numero de funciones que ellos deseen.
La siguiente sección describirá la planificación llevada a cabo para implementar las citadas funciones de los hogares inteligentes.
\section{Planificación}
Para elegir un proceso de desarrollo software que mejor se adecué al proyecto presente se han tenido en cuenta dos procesos que pueden ser utilizados en la programación orientada por características, por ello, la siguiente subsección describe ambos procesos.
\subsection{Procesos de desarrollo Software}
\subsubsection{Feature Driven Development}
\emph{Feature Driven Development} \cite{palmer:2002} es un proceso ágil que se basa en iteraciones cortas que producen un software funcional que los stakeholders pueden ver y monitorizar.
Las iteraciones se deciden en base a características o funcionalidades, que son pequeñas partes del software con significado para el cliente.
FDD consiste en cinco procesos secuenciales durante los cuales se diseña y construye el sistema:
\begin{enumerate}
\item Desarrollo del modelo general.
\item Construcción de la lista de características(features).
\item Planificación por característica.
\item Diseño por característica.
\item Construcción por característica.
\end{enumerate}
Su principal ventaja consiste en que está orientado y gobernado por características, lo que no siempre es la situación idónea, ya que, siempre debemos tener características para poder desarrollar a través de este proceso.
\subsubsection{Test Driven Development}
\emph{Test Driven Development} \cite{astels:2003} es un proceso ágil iterativo e incremental, en el que cada línea de código nueva se escribe en respuesta a una prueba fallida que los propios programadores han programado, es decir, que los requerimientos son traducidos a pruebas.
TDD requiere definir una lista de requisitos, a continuación se puede comenzar a iterar del siguiente modo:
\begin{enumerate}
\item Seleccionar un requisito.
\item Escribir un test.
\item Verificar que el test falla.
\item Escribir el código más sencillo posible para que el test no falle.
\item Verificar que el conjunto de pruebas funciona correctamente.
\item Refactorización.
\item Actualizar la lista de requisitos.
\end{enumerate}
Este proceso tiene dos importantes virtudes, nos permite crear software que cumple íntegramente con los requisitos y genera software fiable. Su punto débil está en que no es un proceso orientado a características.
\subsubsection{Elección del proceso}
Debido a que el proceso \emph{Feature Driven Development} está especialmente orientado para proyectos que se pueden descomponer fácilmente en características, se ha seleccionado para llevar a cabo el desarrollo de este proyecto, ya que como muestra la figura \ref{plan:fig:gantt} las características y/o tareas a implementar se encuentran bien definidas.
\subsection{}

% Imagen a una sola columna
\begin{figure}[!tb]
  % Requires \usepackage{graphicx}
  \centering \includegraphics{planificacion/images/gantt.eps} \\
  \caption{Diagrama de dependencias entre tareas}
  \label{plan:fig:gantt}
\end{figure}

% Imagen a dos columnas
%\begin{figure*}[!tb]
%  % Requires \usepackage{graphicx}
%  \centering \includegraphics[width=\linewidth]{figures/gantt.eps} \\
%  \caption{(Left) Invalid configuration (Right) Valid configuration}
%  \label{fig:contexts}
%\end{figure*}

La figura~\ref{plan:fig:gantt} muestra


