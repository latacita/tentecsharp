%%=======================================================================%%
%% Author : Abascal Fernández, Patricia                                  %%
%% Author : Sánchez Barreiro, Pablo                                      %%   %%                                                                       %%
%% Version: 2.0, 25/06/2013                                              %%   %%                                                                       %%
%% Memoria del Proyecto Fin de Carrera                                   %%
%% Domain Engineering/Pruebas con EUnit                                   %%   %%=======================================================================%%

Una vez implementados los generadores de código, la siguiente tarea era comprobar su correcto funcionamiento. Para ello creamos, de forma sistemática, una serie de pruebas unitarias que permitiesen comprobar el correcto funcionamiento de los generadores de código para un exhaustivo conjunto de diferentes tipos de entrada. Estas pruebas unitarias se implementaron en \emph{EUnit}~\citep{garcia:2011}, el lenguaje de definición de pruebas de la suite Epsilon. El funcionamiento de \emph{EUnit} es similar al de \emph{JUnit}, pero aplicado a los lenguajes de la suite Epsilon, como EGL.

Para comprobar que el funcionamiento del generador de código es correcto, se diseña el caso de prueba y se crea la salida de ese caso de prueba de forma manual. A continuación, se ejecuta el caso de prueba y se comprueba que la salida generada coincide con la esperada, que es la creada manualmente. Al intentar implementar estas pruebas en \emph{EUnit}, nos encontramos con el problema inicial de que este lenguaje no tenía implementada la comparación de fragmentos de texto en ficheros, que era precisamente la funcionalidad que nos hacía falta. No obstante, se cursó una petición a los creadores de Epsilon, los cuales, muy amablamente, incorporaron dicha funcionalidad a \emph{EUnit}. De igual forma, añadieron otra funcionalidad para comprobar que dos directorios contenían los mismos archivos (\imp{assertEqualDirectories}).

Para el diseño de los casos de prueba se siguió inicialmente un enfoque de caja negra, basado en una adaptación de la técnica de clases de equivalencia y análisis de valores límite al entorno de los modelos software. Una vez ejecutadas estas pruebas, se analizó la cobertura alcanzada, definiendo pruebas adicionales, ya de caja blanca, de forma que la cobertura alcanzada fuese del 100\%.

El Cuadro~\ref{dom:table:prueba} resume algunos de los casos de prueba
ejecutados. Concretamente, se muestran los casos de prueba para analizar el comportamiento de las plantillas de generación de código para paquetes y clases.

\begin{table}%
\begin{small}
\begin{tabularx}{\linewidth}{|l|p{6cm}|l|}
 \hline
{}&{Casos válidos}&{Casos no válidos} \\ \hline
\multirow{4}{*}{Paquete} & Paquete con nombre. & Paquete sin nombre. \\
& Paquete con clases e interfaces en su interior. & \\
& Paquete vacío. & \\
& Paquete dentro de otro paquete (recursividad). & \\
\hline
\multirow{12}{*}{Clase} & Clase con nombre. & Clase fuera de un paquete. \\
& Clase tipo abstract. & Clase sin nombre.\\
& Clase sin tipo. & \\
& Clase que hereda de una o varias clases. &\\
& Clase que hereda de una o varias interfaces. &\\
& Clase que hereda de clases e interfaces. &\\
& Clase sin propiedades. &\\
& Clase sin métodos. &\\
& Clase sin propiedades ni métodos. &\\
& Clase con propiedades. &\\
& Clase con métodos. &\\
& Clase con propiedades y métodos. &\\
\hline
\end{tabularx}
\end{small}
\caption{Casos de prueba para los generadores de Ingeniería del Dominio}
\label{dom:table:prueba}
\end{table}
